#!/usr/bin/python

import sys
from args_parser import parse_args
from connection import connect_and_download
from urlparse import urlparse


def validate_options():
    # TODO: Implement
    pass


def validate_url(url):
    if url.scheme != 'https':
        sys.exit("'%s' is not an https url" % url.geturl())


args = parse_args()

ciphers = ""
tls_version = 2
crlfile = ""
cacert = ""
allow_stale_certs = 0
pinnedcertificate = ""
url = ""

if args["url"]:
    url = args["url"]
if args["ciphers"]:
    ciphers = args["ciphers"]
if args["tlsv1.0"]:
    tls_version = 0
if args["tlsv1.1"]:
    tls_version = 1
if args["tlsv1.2"]:
    tls_version = 2
if args["sslv3"]:
    tls_version = 3
if args["crlfile"]:
    crlfile = args["crlfile"]
if args["cacert"]:
    cacert = args["cacert"]
if args["allow_stale_certs"]:
    allow_stale_certs = args["allow_stale_certs"]
if args["pinnedcertificate"]:
    pinnedcertificate = args["pinnedcertificate"]

validate_options()

url = urlparse(url)
validate_url(url)

connect_and_download(url)
